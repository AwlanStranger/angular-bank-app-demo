import{a as N,c as T,h as A,o as U,p as H}from"./chunk-KOANHZKJ.js";import{a as L}from"./chunk-HOA3HOAY.js";import{$ as u,$a as j,F as D,J as g,Ka as f,La as r,Ma as n,Na as E,Pa as M,Q as w,Sa as k,Ua as o,Va as l,Y as b,Za as h,_a as C,cb as d,ma as s,ob as R,pb as F,qa as y,qb as _,rb as O,sb as q,ua as I,ya as x}from"./chunk-SXWNA6SJ.js";function B(i,t){let m=!t?.manualCleanup?t?.injector?.get(b)??w(b):null,p=V(t?.equal),c;t?.requireSync?c=u({kind:0},{equal:p}):c=u({kind:1,value:t?.initialValue},{equal:p});let v,S=i.subscribe({next:a=>c.set({kind:1,value:a}),error:a=>{c.set({kind:2,error:a}),v?.()},complete:()=>{v?.()}});if(t?.requireSync&&c().kind===0)throw new g(601,!1);return v=m?.onDestroy(S.unsubscribe.bind(S)),d(()=>{let a=c();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new g(601,!1)}},{equal:t?.equal})}function V(i=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&i(t.value,e.value)}function W(i,t){if(i&1&&(r(0,"tr")(1,"td"),o(2),n(),r(3,"td",10),o(4),n(),r(5,"td"),o(6),n(),r(7,"td",8),o(8),h(9,"number"),n(),r(10,"td"),o(11),h(12,"date"),n()()),i&2){let e=t.$implicit;s(2),l(e.account),s(2),l(e.type.replace("-"," ")),s(2),l(e.to),s(2),l(C(9,5,e.amount,"1.2-2")),s(3),l(C(12,8,e.at,"medium"))}}function $(i,t){if(i&1&&(r(0,"table",7)(1,"thead")(2,"tr")(3,"th"),o(4,"Account"),n(),r(5,"th"),o(6,"Type"),n(),r(7,"th"),o(8,"Recipient"),n(),r(9,"th",8),o(10,"Amount"),n(),r(11,"th"),o(12,"When"),n()()(),r(13,"tbody"),x(14,W,13,11,"tr",9),n()()),i&2){let e=M();s(14),f("ngForOf",e.filtered())}}function z(i,t){i&1&&(r(0,"div",11),o(1,"No transactions yet. Create an account and try a transfer."),n())}var P=class i{constructor(t,e){this.accts=t;this.fb=e;this.accounts.set(this.accts.all()),this.filterCtrl=this.fb.control(""),this.filterSignal=B(this.filterCtrl.valueChanges.pipe(D("")),{initialValue:""})}accounts=u([]);filterCtrl;filterSignal;rows=d(()=>this.accounts().flatMap(t=>t.history.map(e=>({account:t.name,type:e.kind,to:e.to??"N/A",amount:e.amount,at:e.at}))).sort((t,e)=>e.at.localeCompare(t.at)));filtered=d(()=>{let t=(this.filterSignal()??"").toLowerCase().trim();return t?this.rows().filter(e=>e.account.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)):this.rows()});static \u0275fac=function(e){return new(e||i)(y(L),y(U))};static \u0275cmp=I({type:i,selectors:[["app-history"]],decls:9,vars:3,consts:[["empty",""],[1,"container","mt-5"],[1,"mb-4"],[1,"row","mb-3"],[1,"col-sm-6"],["type","text","placeholder","Filter by account or type...",1,"form-control",3,"formControl"],["class","table table-striped",4,"ngIf","ngIfElse"],[1,"table","table-striped"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"text-capitalize"],[1,"alert","alert-info"]],template:function(e,m){if(e&1&&(r(0,"div",1)(1,"h1",2),o(2,"Transaction History"),n(),r(3,"div",3)(4,"div",4),E(5,"input",5),n()(),x(6,$,15,1,"table",6)(7,z,2,0,"ng-template",null,0,j),n()),e&2){let p=k(8);s(5),f("formControl",m.filterCtrl),s(),f("ngIf",m.filtered().length)("ngIfElse",p)}},dependencies:[q,R,F,H,N,T,A,O,_],encapsulation:2})};export{P as HistoryComponent};
