import{a as G,b as R}from"./chunk-Z3TMEOKB.js";import{a as N,b as s,c as F,d as x,e as A,f as w,i as M,j as q,k as B,l as D,m as k,n as O,o as P,p as V}from"./chunk-KOANHZKJ.js";import{a as j}from"./chunk-HOA3HOAY.js";import{$ as I,Ka as l,La as r,Ma as t,Na as g,Oa as h,Pa as S,Ta as f,Ua as m,Wa as u,Za as c,_a as v,ma as a,ob as E,pb as T,qa as p,rb as C,sb as y,ua as _,ya as d}from"./chunk-SXWNA6SJ.js";function z(i,o){if(i&1&&(r(0,"option",15),m(1),c(2,"number"),t()),i&2){let e=o.$implicit;l("value",e.id),a(),u(" ",e.name," (",e.type,") \u2014 ",v(2,4,e.balance,"1.2-2")," ")}}function H(i,o){i&1&&(r(0,"div",16),m(1,"Required."),t())}function J(i,o){if(i&1&&(r(0,"option",15),m(1),c(2,"number"),t()),i&2){let e=o.$implicit;l("value",e.id),a(),u(" ",e.name," (",e.type,") \u2014 ",v(2,4,e.balance,"1.2-2")," ")}}function K(i,o){i&1&&(r(0,"div",16),m(1,"Required."),t())}function L(i,o){i&1&&(r(0,"div"),m(1,"Required."),t())}function Q(i,o){i&1&&(r(0,"div"),m(1,"Must be greater than 0."),t())}function U(i,o){if(i&1&&(r(0,"div",16),d(1,L,2,0,"div",17)(2,Q,2,0,"div",17),t()),i&2){let e=S();a(),l("ngIf",e.f.amount.errors==null?null:e.f.amount.errors.required),a(),l("ngIf",e.f.amount.errors==null?null:e.f.amount.errors.min)}}function W(i,o){i&1&&(r(0,"div",18),m(1," Choose two different accounts. "),t())}var $=class i{constructor(o,e){this.fb=o;this.accts=e;this.accounts.set(this.accts.all()),this.form=this.fb.group({fromId:["",s.required],toId:["",s.required],amount:[0,[s.required,s.min(.01)]]})}submitted=!1;accounts=I([]);form;get f(){return this.form.controls}showError(o){let e=this.f[o];return e.invalid&&(e.touched||e.dirty||this.submitted)}submit(){if(this.submitted=!0,this.form.invalid){this.form.markAllAsTouched();return}let{fromId:o,toId:e,amount:n}=this.form.value;try{this.accts.transfer(o,e,Number(n)),this.form.reset({fromId:"",toId:"",amount:0}),this.submitted=!1}catch(b){alert(b.message??"Transfer failed")}}static \u0275fac=function(e){return new(e||i)(p(P),p(j))};static \u0275cmp=_({type:i,selectors:[["app-transfer"]],decls:28,vars:15,consts:[[1,"container","mt-5"],[1,"mb-4"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","fromId",1,"form-label"],["id","fromId","formControlName","fromId",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","toId",1,"form-label"],["id","toId","formControlName","toId",1,"form-select"],["for","amount",1,"form-label"],["id","amount","type","number","min","0.01","step","0.01","formControlName","amount",1,"form-control"],["type","submit",3,"variant","disabled"],["class","form-text mt-2",4,"ngIf"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],[1,"form-text","mt-2"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h1",1),m(2,"Transfer Funds"),t(),r(3,"form",2),h("ngSubmit",function(){return n.submit()}),r(4,"div",3)(5,"label",4),m(6,"From"),t(),r(7,"select",5)(8,"option",6),m(9,"Select account"),t(),d(10,z,3,7,"option",7),t(),d(11,H,2,0,"div",8),t(),r(12,"div",3)(13,"label",9),m(14,"To"),t(),r(15,"select",10)(16,"option",6),m(17,"Select account"),t(),d(18,J,3,7,"option",7),t(),d(19,K,2,0,"div",8),t(),r(20,"div",3)(21,"label",11),m(22,"Amount"),t(),g(23,"input",12),d(24,U,3,2,"div",8),t(),r(25,"app-bank-button",13),m(26," Transfer "),t(),d(27,W,2,0,"div",14),t()()),e&2&&(a(3),l("formGroup",n.form),a(4),f("is-invalid",n.showError("fromId")),a(3),l("ngForOf",n.accounts()),a(),l("ngIf",n.showError("fromId")),a(4),f("is-invalid",n.showError("toId")),a(3),l("ngForOf",n.accounts()),a(),l("ngIf",n.showError("toId")),a(4),f("is-invalid",n.showError("amount")),a(),l("ngIf",n.showError("amount")),a(),l("variant","Primary")("disabled",n.form.invalid||n.f.fromId.value===n.f.toId.value),a(2),l("ngIf",n.f.fromId.value&&n.f.toId.value&&n.f.fromId.value===n.f.toId.value))},dependencies:[y,E,T,V,A,D,k,N,w,B,F,x,O,M,q,R,G,C],encapsulation:2})};export{$ as TransferComponent};
